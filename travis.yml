language: python
python:
- '3.6.5'

sudo: required

install:
- pip install .

# Run the doctest
script:
- python setup.py test

deploy:

  - provider: releases
    skip_cleanup: true
    api-key:
    secure: RZGciTIfJErAy7qX7wsj7W15KbAYvhyWSnPTzVDAYWIlJ/obTiaEqBimEVOg04dKEORG1ixnmS9U62wnkMSw4rRAguX4CYWKAYKkQ1h7krQq5kgGb8kv+IjblBUuqboWQJabyOnlziv/y6OFwcTRaWw7drzQybBvyu6TH4kKYVTufiZG1eBu1msR7MBsEO9Sc25oyq3Io1ot1sagZ9uDvOoq46nE3ysz4s5PRzOd/M3bnfTQcpKrQBkOeUFWkm8cbVsiSwe1HH5MfzYw9Ruhvuv2171T3N2mJHV7WgvcRupZ2VEbCQWTsd8g9m6Z98I1FgyIKmQV+VYZGY8sLkRON5p8a5AfMgUTh6jiSBTK6NPoGW8EJIIJ+0XFqq5Xc2tuFt3zUvLbquPaMLiVAHASewqP6lyysWB8b3oaiZA3GnuRE5EwG7thRxGbDfy+Od+L3WdzFazsfuYh1j6y+kiuizK9VmgWjHKLiNM673x+tyrr4QIOR1YPl1SK2qWwXfXmcgqsj1pz5v9fqkUWavqTlva8Ri62q5rRGMVPiS9Ks5iCtMSR40KzJkWsJD2keDmFAfK+nSJW4MuQXaC4gy6db0Wxpd0IpHNG8kkN86aMsuJmO1egh1SaJLT+HsWoSU5qaT20olw0aVwQsiIYvnUafzQcRu36uaLX8rvwSbGs31o=
    name: logagg-utils-0.5.0
    tag_name: 0.5.0
    on:
        branch: master
        repo: deep-compute/logagg-utils

  - provider: pypi
    distributions: "sdist bdist_wheel"
    skip_cleanup: true
    user: "deepcompute"
    password:
        secure: "JZEj0Shuxs+8jA8S6CQPCdCH5quGtDHEAr/SftsBz793mr58xlRH/B8NVaOkTIYoI4ODQNbPJRHxiGBIrJWcXk+mJUgWil9ClGpNRCZpmRwPw5Dzi8H7nkHDlrFgG+ioWR8jA5kJUq41MNWMN2SvfDXuwDv66Qige4Z23AQ5aSkkJsKydAFbGrJOKY1VQb5mlbyhIvvFsAuyZ6nfSnLFa0rsw/Ry5l+8azCIoIlUTZiFlJwUJOb++jx88ZjqSNRX2XtsWzOABKJl35VW5F/M89YNsJ8DMAXGffn+XoEek8jxvwMgG9ImUlz/vf9UqScBxoGAMYBg054yeF4c/yCDxANZbpuZMFWXsBLp1QQKwpv843dcQ22VmMeIza/4oCY4uLkpSxkchMiLGnbUw72viMrnO3Ty2ZH1JsHUkfLZ02i91JKczAzPTFTyIIlvlausTFduZ4bXq6i2l95vynq5tOUSysE3fI7bCs5hWJU4qi5yLGWlu7QuuvdMZDYKs+5rl8qp4jURtdD3g/0oSX0DYm0KV7zKOpZp8wOj6Cv8hZytiyx+nW+SMFd929CXXScGVWh/LyJb7iohalRYM9w+f32zpn6Yn854GDTdDx9cf2S3/Mu1VpXsePodKKpa2kOFq/z1Ta8dEkqxMhWsQCLeOkLdl30K2imRoEEdErUsHao="
    on:
      branch: master
      # only when there is a release it will update pypi
      tags: true
